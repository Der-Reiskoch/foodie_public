(()=>{var N=(e,t,o)=>{let n={value:t,label:o};e.push(n)},C=N;var S=(e,t)=>{let o="";return e.includes(t)?e.split(t).forEach((i,r)=>{let l=r>0?t:"";o+=l+S(i,t)}):o=e.charAt(0).toUpperCase()+e.slice(1),o},E=S;var j=e=>{let t=e;return t=E(t," "),t=E(t,"-"),t=t.replace(" Am "," am "),t=t.replace(" Bei "," bei "),t=t.replace(" Ob Der "," ob der "),t.trim(),t},T=j;var D=(e,t,o)=>{let n="";for(let i=0;i<e.length;i++)o?e[i].label===t&&(n=e[i].value):e[i].label.toLowerCase()===t.toLowerCase()&&(n=e[i].value);return n},k=D;var w=(e,t)=>{let o=[];for(let n=0;n<e.length;n++){let i=e[n].value;t.includes(i)&&o.push(e[n])}return o},f=w;var s=[],J=(e,t)=>{let o=s.findIndex(n=>n.key===e);o!==-1?s[o].value=t:s.push({key:e,value:t})},V=e=>{s.reduce,s.splice(s.findIndex(t=>t.key===e),1)},m=(e,t,o,n)=>{t&&t.addEventListener("khao-select-field-change",i=>{let l=i.detail.value;l!=o?J(e,l):V(e),n()})};var c="-1",u,g,y,h,F,b=[],L=[],x=[],H=[],O,d=()=>{O.forEach(e=>{let t=e.getAttribute("data-month"),o=e.getAttribute("data-city"),n=e.getAttribute("data-country"),i=e.getAttribute("data-region");e.classList.remove("calendar-item--no-match"),s.forEach(r=>{let l=!0;r.key==="month"&&t!==r.value&&(l=!1),r.key==="country"&&n!==r.value&&(l=!1),r.key==="city"&&o!==r.value&&(l=!1),r.key==="region"&&i!==r.value&&(l=!1),l||e.classList.add("calendar-item--no-match")})}),_()},_=()=>{let e=document.querySelectorAll(".calendar-item--no-match"),t=O.length,o=e.length,n=t-o;F=document.getElementById("js-display-number-of-matches"),F&&(F.innerHTML=`${n}`)},q=()=>{let e=JSON.parse(document.getElementById("js-filter-month-values").textContent),t=JSON.parse(document.getElementById("js-filter-country-values").textContent),o=JSON.parse(document.getElementById("js-filter-city-values").textContent),n=JSON.parse(document.getElementById("js-filter-region-values").textContent),i=[],r=[],l=[],p=[];O=document.querySelectorAll(".calendar-item"),O.forEach(a=>{let v=a.getAttribute("data-month");i.includes(v)||i.push(v);let I=a.getAttribute("data-country");l.includes(I)||l.push(I);let M=a.getAttribute("data-city");r.includes(M)||r.push(M);let A=a.getAttribute("data-region");p.includes(A)||p.push(A)}),u=document.getElementById("js-select-month"),u&&(i.push(c),b=f(e,i),u.setAttribute("options",JSON.stringify(b)),m("month",u,c,d)),y=document.getElementById("js-select-country"),y&&(l.push(c),x=f(t,l),y.setAttribute("options",JSON.stringify(x)),m("country",y,c,d)),g=document.getElementById("js-select-city"),g&&(L=o,r.sort().forEach(a=>{C(L,a,T(a))}),g.setAttribute("options",JSON.stringify(L)),m("city",g,c,d)),h=document.getElementById("js-select-region"),h&&(p.push(c),H=f(n,p),h.setAttribute("options",JSON.stringify(H)),m("region",h,c,d))},z=()=>{if(window.location.hash){let e=window.location.hash.replace("#","");if(console.log("monthString",e),e){let t=k(b,e,!1);if(t){u=document.getElementById("js-select-month"),u.setAttribute("selectedValue",t);let o="khao-select-field-change",n=new CustomEvent(o,{detail:{value:t},bubbles:!0,composed:!0});u.dispatchEvent(n)}}}},K=()=>{let e=document.getElementById("js-iframe-dialog"),t=document.getElementById("js-iframe-in-dialog");if(!e||!t){console.error("iframeDialog or ifFrameInDialog not found");return}document.querySelectorAll(".js-calendar-item-image-link").forEach(n=>{n.addEventListener("click",i=>{i.preventDefault(),t.src=n.href,e.showModal()})})},B=()=>{q(),z(),d(),K()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{B()}):B();})();
